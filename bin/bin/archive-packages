#!/bin/bash

case "$1" in
"brew")
	comm \
		"$HOME/git/dotfiles/packages-meta/.config/packages-meta/brew" \
		<(set-difference <(brew leaves) <(brew cask list));;
"brew-cask")
	comm \
		"$HOME/git/dotfiles/packages-meta/.config/packages-meta/brew-cask" \
		<(brew cask list);;
"pacaur")
	comm \
		"$HOME/git/dotfiles/packages-meta/.config/packages-meta/pacaur" \
		<(pacman -Qemq);;
"pacman")
	comm \
		"$HOME/git/dotfiles/packages-meta/.config/packages-meta/pacman" \
		<(set-difference <(pacman -Qenq) <(pacman -Qgq base-devel) <(pacman -Qgq base));;
"pip")
	comm \
		"$HOME/git/dotfiles/packages-meta/.config/packages-meta/pip" \
		<(python3 -m pip list --not-required --format=freeze | sed 's/=.*//' | sort);;

*)
	echo "$(basename "$0")" "$(grep '^"[a-z-]*")$' "$0" | sort | sed 's/^"\(.*\)")/\1/' | tr '\n' '|' | sed 's/|$//')";;
esac
