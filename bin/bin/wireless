#!/bin/sh

# find device
device="$(ip link show | sed 's/^[0-9]*: //; s/:.*//' | grep '^w')"

# kill processes
killall -9 wpa_supplicant dhcpcd
ip link set "$device" down

# restart processes
iwconfig "$device" channel auto
ip link set "$device" up && wpa_supplicant -Bi "$device" -c /root/wpa_supplicant.conf && dhcpcd "$device" --debug --debug
